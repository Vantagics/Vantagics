# VantageData 产品功能特征文档

## 一、产品概述

VantageData 是一款基于人工智能的数据分析平台，采用现代化的桌面应用架构（Go + Wails 2.0 + React + TypeScript + Tailwind CSS），为用户提供智能化的数据探索、分析和可视化能力。目标平台包括 Windows 10/11、macOS 10.15+ 和 Linux。

---

## 二、技术架构

### 2.1 技术栈

| 层级 | 技术选型 |
|------|----------|
| 桌面框架 | Go + Wails 2.0 |
| 前端框架 | React + TypeScript |
| 样式方案 | Tailwind CSS |
| 数据处理 | Python（pandas, numpy, matplotlib, mlxtend） |
| 本地数据库 | SQLite |
| AI 引擎 | 多模型支持 |

### 2.2 支持的 AI 模型

- **OpenAI**: GPT-4o, GPT-4, GPT-3.5
- **Anthropic (Claude)**: Claude 3.5 Sonnet, Claude 3 Opus
- **通义千问 (Qwen)**: Qwen 系列模型
- **智谱 GLM**: GLM-4 等
- **DeepSeek**: DeepSeek 系列模型
- **MiniMax**: MiniMax 系列模型
- **Google Gemini**: Gemini Pro

---

## 三、核心功能模块

### 3.1 AI 智能分析引擎

#### 自然语言交互分析
- 无需编写 SQL 或代码，通过自然语言完成数据分析
- 智能意图理解，自动识别分析意图
- 多轮对话支持，维护上下文连续对话
- 自动图表生成，根据数据特征选择合适的可视化

#### 记忆管理系统
- 短期记忆：最近 5 条完整消息
- 中期记忆：对话压缩为摘要
- 长期记忆：持久化关键事实，跨会话复用

#### 分析记录与回放
- 记录每步操作（现象→行动→结论）
- 支持分析过程回放
- Schema 兼容性分析

### 3.2 数据源接入模块

#### 本地文件导入
- Excel (.xlsx, .xls) - 多工作表自动识别
- CSV - 单文件或目录批量导入
- JSON - 结构化数据导入

#### 数据库连接
- MySQL
- PostgreSQL
- SQLite
- Snowflake（企业级云数据仓库）
- BigQuery（Google Cloud 数据仓库）

#### 电商平台集成
- **Shopify**: OAuth 授权 + 手动 Token 模式
- **BigCommerce**: API 集成
- **eBay**: 支持 Fulfillment/Finances/Analytics API
- **Etsy**: OAuth 2.0 集成

#### 项目管理工具
- Jira Cloud
- Jira Server / Data Center

### 3.3 数据可视化模块

#### 支持的图表类型
- 折线图 - 趋势分析、时间序列
- 柱状图 - 分类对比、数量统计
- 饼图 - 占比分析、构成展示
- 散点图 - 相关性分析
- 热力图 - 密度分析、矩阵展示
- 组合图表 - 多维度综合展示

#### 图表交互功能
- 数据钻取
- 动态筛选
- 图表导出（图片格式）

### 3.4 分析技能系统 (Skills)

#### 内置技能
- **群组分析 (Cohort Analysis)**: 用户留存率分析、留存热力图、高价值用户识别
- **销售漏斗分析 (Sales Funnel)**: 多阶段转化率分析、流失点识别、渠道效果对比

#### 技能管理
- 启用/禁用技能
- 安装自定义技能（ZIP 包）
- 技能分类管理
- 分析保护机制（分析进行中禁止修改）

---

## 四、用户界面功能

### 4.1 页面结构

```
┌──────────────────────────────────────────────────────┐
│                    顶部菜单栏                          │
├──────────┬─────────────────────────┬────────────────┤
│          │                         │                │
│ 左侧面板  │      中央面板            │   右侧面板     │
│ 会话列表  │   AI对话 + 图表结果      │  仪表盘/数据  │
│ 数据源    │                         │   浏览器       │
│          ├─────────────────────────┤                │
│          │       消息输入框         │                │
└──────────┴─────────────────────────┴────────────────┘
```

### 4.2 主要功能页面

| 页面/组件 | 功能说明 |
|-----------|----------|
| 左侧面板 | 会话管理、历史记录、数据源列表 |
| 中央面板 | AI 对话、图表展示 |
| 右侧面板 | 数据浏览器、仪表盘 |
|  指标卡片、仪表盘布局 |图表、洞察 |
| 数据浏览器 | 表结构、数据浏览 |
| 技能管理页面 | 启用/禁用、安装自定义技能 |
| 分析技能包管理 | 本地包列表、导入/导出 |
| 市场浏览页面 | 分类浏览、积分下载 |

### 4.3 键盘快捷键

| 快捷键 | 功能 |
|--------|------|
| Ctrl+1 / Cmd+1 | 聚焦左侧面板 |
| Ctrl+2 / Cmd+2 | 聚焦中央面板 |
| Ctrl+3 / Cmd+3 | 聚焦右侧面板 |
| Ctrl+B / Cmd+B | 切换数据浏览器 |
| Escape | 关闭数据浏览器 |

### 4.4 对话框功能

- 添加数据源对话框
- 许可证激活对话框
- 设置对话框
- 导入分析技能包对话框
- 导出分析技能包对话框
- 分享到市场对话框

---

## 五、许可证与授权系统

### 5.1 授权模式

1. **商业模式**: 序列号激活，自动获取云端 LLM 配置
2. **开源模式**: 用户自行配置 API 密钥

### 5.2 积分系统 (Credits)

- 每日限制模式（固定次数/天）
- 积分模式（每次分析消耗 1.5 Credits）

### 5.3 许可证功能

- 激活许可证
- 申请试用序列号
- 获取激活状态
- 注销许可证
- 刷新许可证
- 检查是否已激活

---

## 六、市场与交易系统

### 6.1 分析技能包市场

- SN + Email 自动登录（基于 License 服务器认证）
- 分类浏览（Shopify, BigCommerce, eBay, Etsy 及自定义分类）
- 积分购买/下载
- 本地使用权限管理

### 6.2 定价模式

- **免费 (Free)**: 无需积分，直接下载使用
- **按次付费 (Per Use)**: 每次执行消耗一次使用权，支持追加购买
- **限时 (Time Limited)**: 购买后在指定天数内无限次使用
- **订阅 (Subscription)**: 按月/年订阅，到期前可续费

### 6.3 市场 API 功能

- SN + Email 自动认证登录
- 浏览市场包（按分类筛选）
- 下载市场包（自动扣除积分）
- 分享包到市场（支持四种定价模式）
- 获取市场分类
- 获取积分余额
- 追加购买使用次数
- 订阅续费

---

## 七、导入导出功能

### 7.1 数据导出格式

- PDF - 专业报告（支持中文）
- Excel (.xlsx) - 多工作表
- PowerPoint (.pptx) - 幻灯片
- Word (.docx) - Markdown 支持
- CSV - 通用格式
- SQL - 数据库脚本
- JSON - 结构化数据

### 7.2 分析技能包 (.qap)

- ZIP 格式封装 JSON
- 可选密码保护
- 包含 Schema 验证
- 可重放执行

### 7.3 分析记录文件 (.rbi)

- 完整分析过程记录
- Schema 兼容性验证
- 支持回放

---

## 八、扩展能力

### 8.1 MCP 协议支持
- 连接外部 MCP 服务
- 扩展 Agent 工具能力

### 8.2 搜索 API 集成
- DuckDuckGo（免费）
- Serper.dev（Google 搜索）
- Tavily
- Bing

### 8.3 UAPI 集成
- 通用搜索（网页、新闻、产品）
- 社交媒体数据
- 游戏数据
- 图片搜索

### 8.4 代理服务器支持
- HTTP/HTTPS/SOCKS5 协议
- 认证支持

---

## 九、国际化支持

- **双语界面**: 英文 / 简体中文
- **实时切换**: 无需重启
- **参数化翻译**: 支持动态内容
- **前后端统一**: 界面和服务消息全面本地化

---

## 十、后端 API 核心能力

### 10.1 数据分析 API
- 发送分析消息
- 自由聊天（网络搜索）
- 取消分析
- 检查是否可以开始新分析

### 10.2 数据源管理 API
- 导入 Excel/CSV/JSON 数据源
- 添加/删除/重命名/刷新数据库数据源

### 10.3 会话管理 API
- 创建新会话
- 获取分析会话
- 删除会话
- 更新会话标题

### 10.4 技能系统 API
- 获取技能列表
- 启用/禁用技能
- 从 ZIP 安装技能

---

## 十一、部署与服务

### 11.1 配套服务
- 许可证服务器
- 市场服务器

### 11.2 目标平台
- Windows 10/11
- macOS 10.15+
- Linux

---

## 十二、系统要求

- **操作系统**：Windows 10/11、macOS 10.15+、Linux
- **内存**：建议 8GB 以上
- **存储**：至少 500MB 可用空间
- **网络**：需要网络连接以使用 AI 分析功能
